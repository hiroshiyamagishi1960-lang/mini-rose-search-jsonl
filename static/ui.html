<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ミニバラ盆栽愛好会 デジタル資料館｜検索（JSONL版）</title>
  <meta name="robots" content="noindex" />
  <style>
    :root{
      --bg:#fafafa; --card:#ffffff; --b:#e5e7eb; --muted:#64748b; --txt:#0f172a;
      --accent:#ef4444; --pill:#fff7ed; --pillbd:#fed7aa; --link:#1d4ed8;
      --hl:#e6f3ff; --warn:#fff7cc; --warn-b:#fde68a; --navy:#1e3a8a; --qbg:#eaf3ff;
    }
    html,body{margin:0;background:var(--bg);color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;line-height:1.7}
    html{font-size:18px}
    @media (max-width:480px){ html{font-size:19px} }

    .container{max-width:1000px;margin:18px auto;padding:0 16px}
    h1{margin:0 0 12px;font-size:26px}
    .accent{color:var(--accent);font-weight:700}

    .toolbar{background:var(--card);border:1px solid var(--b);border-radius:16px;padding:14px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .pill{display:inline-block;background:var(--pill);border:1px solid var(--pillbd);border-radius:999px;padding:4px 10px;font-size:12px;color:#92400e}
    .api{font-size:12px;color:var(--muted)}

    input[type="text"],select,button{
      border:1px solid var(--b);border-radius:10px;background:#fff;font-size:16px;line-height:1.2
    }
    /* ★検索欄＝濃紺の太い枠＋薄い青の背景 */
    #q{
      flex:1 1 480px; min-width:260px;
      padding:12px 14px; border:3px solid var(--navy); background:var(--qbg);
      outline:none;
    }
    #q:focus{ box-shadow:0 0 0 3px rgba(30,58,138,.15) }

    select{padding:10px 12px}
    button{padding:10px 16px;cursor:pointer;background:#f8fafc;min-height:44px}
    button.primary{background:#e7f0ff;border-color:#bfdbfe}
    button[disabled]{opacity:.5;cursor:not-allowed}

    .section{background:var(--card);border:1px solid var(--b);border-radius:16px;margin-top:16px}
    .section h2{margin:0;padding:12px 16px;border-bottom:1px solid var(--b);font-size:16px}
    .section .body{padding:12px 16px}

    .muted{color:var(--muted)}
    .meta{font-size:14px;margin-bottom:8px}

    .result{border:1px solid var(--b);border-radius:14px;padding:12px;background:#fff;margin-bottom:12px}
    .title{font-weight:700;font-size:20px;margin-bottom:4px}
    .snippet{white-space:pre-wrap;word-break:break-word}
    .hit{display:inline-block;font-size:12px;color:#1d4ed8;background:#e0ecff;border:1px solid #bfdbfe;border-radius:999px;padding:2px 8px;margin-left:6px}
    .src{font-size:15px;margin-top:8px}
    /* ★出典リンク＝押しやすいボタン風 */
    .src a{
      display:inline-block; padding:10px 12px; border:1px solid var(--b); border-radius:10px;
      color:var(--link); text-decoration:none; word-break:break-all;
      -webkit-tap-highlight-color:transparent;
    }
    .src a:focus-visible{ outline:2px solid #93c5fd; outline-offset:2px }

    .pager{display:flex;gap:8px;justify-content:flex-start;margin-top:8px}

    details summary{cursor:pointer;padding:12px 16px;border-bottom:1px solid var(--b)}
    .json{white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:12px;background:#0b1020;color:#d1e7ff;border-radius:12px;padding:10px;overflow:auto}

    .notice{background:var(--warn);border:1px solid var(--warn-b);border-radius:14px;padding:12px 14px;margin-top:16px}

    mark{background:var(--hl);padding:0 .15em;border-radius:3px}
  </style>
</head>
<body>
  <div class="container">
    <h1>ミニバラ盆栽愛好会 デジタル資料館</h1>

    <div class="toolbar">
      <div class="row" style="justify-content:space-between">
        <div class="accent">検索システム</div>
        <span class="pill">年でしぼる＋ページ送り</span>
      </div>

      <div class="row" style="margin-top:8px">
        <input id="q" type="text" placeholder="例） 苔 ／ 例） コンテスト 2023 ／ 例） 剪定 1999-2001" />
        <select id="order" title="並び順">
          <option value="relevance" selected>関連順</option>
          <option value="latest">最新順</option>
        </select>
        <button class="primary" id="btnSearch">検索</button>
        <button id="btnClear">クリア</button>
      </div>

      <div class="api" style="margin-top:6px">
        API: <code>/api/search</code>　|　版: <span id="ver">…</span>　
        <a href="/health" target="_blank" rel="noopener">/health</a> ・
        <a href="/version" target="_blank" rel="noopener">/version</a>
      </div>
    </div>

    <div class="section">
      <h2>検索結果（整形表示）</h2>
      <div class="body">
        <div id="meta" class="meta muted">（未取得）</div>
        <div id="results"></div>
        <div class="pager">
          <button id="prev" disabled>前へ</button>
          <button id="next" disabled>次へ</button>
        </div>
      </div>
    </div>

    <details class="section" style="margin-top:12px" open>
      <summary>開発者向け：レスポンス（生のJSON）</summary>
      <div class="body">
        <div class="muted" style="margin-bottom:6px">
          ※ タイトルと本文の<strong>ハイライト（薄い青）<
